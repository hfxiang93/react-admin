import{r as l,C as R,L as z,b7 as M,b8 as U,B as K,a as E,b9 as G,ba as H,v as J,h as Q,c as W,bb as X,f as Y,ao as Z,K as ee,a1 as te,e as $,j as u,ar as ne,ab as O,ae}from"./index-08111c84.js";import{T as oe}from"./Table-19de0671.js";import{S as le}from"./index-58421585.js";import"./index-b534dfa9.js";import"./Pagination-29997769.js";var re=function(t){var a=t.prefixCls,o=t.okButtonProps,c=t.cancelButtonProps,g=t.title,m=t.cancelText,f=t.okText,v=t.okType,p=t.icon,n=t.showCancel,r=n===void 0?!0:n,d=t.close,y=t.onConfirm,C=t.onCancel,_=l.exports.useContext(R),P=_.getPrefixCls;return l.exports.createElement(z,{componentName:"Popconfirm",defaultLocale:M.Popconfirm},function(h){return l.exports.createElement("div",{className:"".concat(a,"-inner-content")},l.exports.createElement("div",{className:"".concat(a,"-message")},p,l.exports.createElement("div",{className:"".concat(a,"-message-title")},U(g))),l.exports.createElement("div",{className:"".concat(a,"-buttons")},r&&l.exports.createElement(K,E({onClick:C,size:"small"},c),m!=null?m:h.cancelText),l.exports.createElement(G,{buttonProps:E(E({size:"small"},H(v)),o),actionFn:y,close:d,prefixCls:P("btn"),quitOnNullishReturnValue:!0,emitEvent:!0},f!=null?f:h.okText)))})},D=globalThis,ie=globalThis&&globalThis.__rest||function(e,t){var a={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(a[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,o=Object.getOwnPropertySymbols(e);c<o.length;c++)t.indexOf(o[c])<0&&Object.prototype.propertyIsEnumerable.call(e,o[c])&&(a[o[c]]=e[o[c]]);return a},se=l.exports.forwardRef(function(e,t){var a=l.exports.useContext(R),o=a.getPrefixCls,c=J(!1,{value:e.open!==void 0?e.open:e.visible,defaultValue:e.defaultOpen!==void 0?e.defaultOpen:e.defaultVisible}),g=Q(c,2),m=g[0],f=g[1],v=function(i,s){var x,w;f(i,!0),(x=e.onVisibleChange)===null||x===void 0||x.call(e,i,s),(w=e.onOpenChange)===null||w===void 0||w.call(e,i,s)},p=function(i){v(!1,i)},n=function(i){var s;return(s=e.onConfirm)===null||s===void 0?void 0:s.call(D,i)},r=function(i){var s;v(!1,i),(s=e.onCancel)===null||s===void 0||s.call(D,i)},d=function(i){i.keyCode===ee.ESC&&m&&v(!1,i)},y=function(i){var s=e.disabled,x=s===void 0?!1:s;x||v(i)},C=e.prefixCls,_=e.placement,P=_===void 0?"top":_,h=e.trigger,B=h===void 0?"click":h,T=e.okType,F=T===void 0?"primary":T,N=e.icon,I=N===void 0?l.exports.createElement(Z,null):N,k=e.children,j=e.overlayClassName,V=ie(e,["prefixCls","placement","trigger","okType","icon","children","overlayClassName"]),S=o("popover",C),A=o("popconfirm",C),q=W(A,j);return l.exports.createElement(X,E({},V,{trigger:B,prefixCls:S,placement:P,onOpenChange:y,open:m,ref:t,overlayClassName:q,_overlay:l.exports.createElement(re,E({okType:F,icon:I},e,{prefixCls:S,close:p,onConfirm:n,onCancel:r}))}),Y(k,{onKeyDown:function(i){var s,x;l.exports.isValidElement(k)&&((x=k==null?void 0:(s=k.props).onKeyDown)===null||x===void 0||x.call(s,i)),d(i)}}))}),ce=se;const L=te.createContext(null),de=({index:e,...t})=>{const[a]=O.useForm();return u(O,{form:a,component:!1,children:u(L.Provider,{value:a,children:u("tr",{...t},e)})})},ue=({title:e,editable:t,children:a,dataIndex:o,record:c,handleSave:g,...m})=>{const[f,v]=l.exports.useState(!1),p=l.exports.useRef(null),n=l.exports.useContext(L);l.exports.useEffect(()=>{f&&p.current.focus()},[f]);const r=()=>{v(!f),n.setFieldsValue({[o]:c[o]})},d=async()=>{try{const C=await n.validateFields();r(),g({...c,...C})}catch{}};let y=a;return t&&(y=f?u(O.Item,{style:{margin:0},name:o,rules:[{required:!0,message:`${e} is required`}],children:u(ae,{ref:p,onPressEnter:d,onBlur:d})}):u("div",{className:"editable-cell-value-wrap",style:{paddingRight:24},onClick:r,children:a})),u("td",{...m,children:y})},ge=()=>{const[e,t]=l.exports.useState([{key:"0",name:"Edward King 0",age:"32",address:"London, Park Lane no. 0"},{key:"1",name:"Edward King 1",age:"32",address:"London, Park Lane no. 1"}]),[a,o]=l.exports.useState(2),c=n=>{const r=e.filter(d=>d.key!==n);t(r)},g=[{title:"\u5E8F\u53F7",dataIndex:"index",render:(n,r,d)=>`${d+1}`},{title:"name",dataIndex:"name",width:"30%",editable:!0},{title:"age",dataIndex:"age",editable:!0},{title:"address",dataIndex:"address",editable:!0},{title:"operation",dataIndex:"operation",render:(n,r)=>e.length>=1?u(ne,{children:$(le,{children:[u(ce,{title:"Sure to delete?",onConfirm:()=>c(r.key),children:u("a",{children:"Delete"})}),u("a",{onClick:m,children:"Copy"})]})}):null}],m=()=>{const n={key:a,name:`Edward King ${a}`,age:"32",address:`London, Park Lane no. ${a}`};t([...e,n]),o(a+1)},f=n=>{const r=[...e],d=r.findIndex(C=>n.key===C.key),y=r[d];r.splice(d,1,{...y,...n}),t(r)},v={body:{row:de,cell:ue}},p=g.map(n=>n.editable?{...n,onCell:r=>({record:r,editable:n.editable,dataIndex:n.dataIndex,title:n.title,handleSave:f})}:n);return $("div",{children:[u(K,{onClick:m,type:"primary",style:{marginBottom:16},children:"Add a row"}),u(oe,{components:v,rowClassName:()=>"editable-row",bordered:!0,dataSource:e,columns:p})]})};export{ge as default};
