import{U as D,r as d,j as t,B as h,bh as v,I as g}from"./index-2e08c262.js";import{T as j}from"./Table-b7d42418.js";import{S as y}from"./index-1c8c4498.js";import{P as V}from"./index-9b45f168.js";import"./index-bbeead56.js";import"./Pagination-71f7a1f2.js";var n="/Users/xhf/code-github/react-admin/src/views/proTable/useComponent/index.tsx";const E=D.createContext(null),C=({index:a,...s})=>{const[r]=v.useForm();return t.exports.jsxDEV(v,{form:r,component:!1,children:t.exports.jsxDEV(E.Provider,{value:r,children:t.exports.jsxDEV("tr",{...s},a,!1,{fileName:n,lineNumber:36,columnNumber:5},void 0)},void 0,!1,{fileName:n,lineNumber:35,columnNumber:4},void 0)},void 0,!1,{fileName:n,lineNumber:34,columnNumber:3},void 0)},w=({title:a,editable:s,children:r,dataIndex:m,record:u,handleSave:N,...c})=>{const[l,b]=d.exports.useState(!1),x=d.exports.useRef(null),e=d.exports.useContext(E);d.exports.useEffect(()=>{l&&x.current.focus()},[l]);const o=()=>{b(!l),e.setFieldsValue({[m]:u[m]})},i=async()=>{try{const p=await e.validateFields();o(),N({...u,...p})}catch{}};let f=r;return s&&(f=l?t.exports.jsxDEV(v.Item,{style:{margin:0},name:m,rules:[{required:!0,message:`${a} is required`}],children:t.exports.jsxDEV(g,{ref:x,onPressEnter:i,onBlur:i},void 0,!1,{fileName:n,lineNumber:75,columnNumber:5},void 0)},void 0,!1,{fileName:n,lineNumber:74,columnNumber:4},void 0):t.exports.jsxDEV("div",{className:"editable-cell-value-wrap",style:{paddingRight:24},onClick:o,children:r},void 0,!1,{fileName:n,lineNumber:78,columnNumber:4},void 0)),t.exports.jsxDEV("td",{...c,children:f},void 0,!1,{fileName:n,lineNumber:83,columnNumber:9},void 0)},R=()=>{const[a,s]=d.exports.useState([{key:"0",name:"Edward King 0",age:"32",address:"London, Park Lane no. 0"},{key:"1",name:"Edward King 1",age:"32",address:"London, Park Lane no. 1"}]),[r,m]=d.exports.useState(2),u=e=>{const o=a.filter(i=>i.key!==e);s(o)},N=[{title:"\u5E8F\u53F7",dataIndex:"index",render:(e,o,i)=>`${i+1}`},{title:"name",dataIndex:"name",width:"30%",editable:!0},{title:"age",dataIndex:"age",editable:!0},{title:"address",dataIndex:"address",editable:!0},{title:"operation",dataIndex:"operation",render:(e,o)=>a.length>=1?t.exports.jsxDEV(t.exports.Fragment,{children:t.exports.jsxDEV(y,{children:[t.exports.jsxDEV(V,{title:"Sure to delete?",onConfirm:()=>u(o.key),children:t.exports.jsxDEV("a",{children:"Delete"},void 0,!1,{fileName:n,lineNumber:144,columnNumber:9},void 0)},void 0,!1,{fileName:n,lineNumber:143,columnNumber:8},void 0),t.exports.jsxDEV("a",{onClick:c,children:"Copy"},void 0,!1,{fileName:n,lineNumber:146,columnNumber:8},void 0)]},void 0,!0,{fileName:n,lineNumber:142,columnNumber:7},void 0)},void 0,!1):null}],c=()=>{const e={key:r,name:`Edward King ${r}`,age:"32",address:`London, Park Lane no. ${r}`};s([...a,e]),m(r+1)},l=e=>{const o=[...a],i=o.findIndex(p=>e.key===p.key),f=o[i];o.splice(i,1,{...f,...e}),s(o)},b={body:{row:C,cell:w}},x=N.map(e=>e.editable?{...e,onCell:o=>({record:o,editable:e.editable,dataIndex:e.dataIndex,title:e.title,handleSave:l})}:e);return t.exports.jsxDEV("div",{children:[t.exports.jsxDEV(h,{onClick:c,type:"primary",style:{marginBottom:16},children:"Add a row"},void 0,!1,{fileName:n,lineNumber:196,columnNumber:4},void 0),t.exports.jsxDEV(j,{components:b,rowClassName:()=>"editable-row",bordered:!0,dataSource:a,columns:x},void 0,!1,{fileName:n,lineNumber:199,columnNumber:4},void 0)]},void 0,!0,{fileName:n,lineNumber:195,columnNumber:3},void 0)};export{R as default};
