import{V as C,r as i,a as y,j as n,B as k,F as w,bh as h,I as E}from"./index-810d8f06.js";import{T as v}from"./Table-4929a35f.js";import{S as I}from"./index-bebb7c86.js";import{P as S}from"./index-454d6019.js";import"./index-19de00be.js";import"./Pagination-f51b926b.js";const b=C.createContext(null),F=({index:r,...s})=>{const[a]=h.useForm();return n(h,{form:a,component:!1,children:n(b.Provider,{value:a,children:n("tr",{...s},r)})})},P=({title:r,editable:s,children:a,dataIndex:l,record:c,handleSave:x,...u})=>{const[d,g]=i.exports.useState(!1),m=i.exports.useRef(null),e=i.exports.useContext(b);i.exports.useEffect(()=>{d&&m.current.focus()},[d]);const t=()=>{g(!d),e.setFieldsValue({[l]:c[l]})},o=async()=>{try{const f=await e.validateFields();t(),x({...c,...f})}catch{}};let p=a;return s&&(p=d?n(h.Item,{style:{margin:0},name:l,rules:[{required:!0,message:`${r} is required`}],children:n(E,{ref:m,onPressEnter:o,onBlur:o})}):n("div",{className:"editable-cell-value-wrap",style:{paddingRight:24},onClick:t,children:a})),n("td",{...u,children:p})},K=()=>{const[r,s]=i.exports.useState([{key:"0",name:"Edward King 0",age:"32",address:"London, Park Lane no. 0"},{key:"1",name:"Edward King 1",age:"32",address:"London, Park Lane no. 1"}]),[a,l]=i.exports.useState(2),c=e=>{const t=r.filter(o=>o.key!==e);s(t)},x=[{title:"\u5E8F\u53F7",dataIndex:"index",render:(e,t,o)=>`${o+1}`},{title:"name",dataIndex:"name",width:"30%",editable:!0},{title:"age",dataIndex:"age",editable:!0},{title:"address",dataIndex:"address",editable:!0},{title:"operation",dataIndex:"operation",render:(e,t)=>r.length>=1?n(w,{children:y(I,{children:[n(S,{title:"Sure to delete?",onConfirm:()=>c(t.key),children:n("a",{children:"Delete"})}),n("a",{onClick:u,children:"Copy"})]})}):null}],u=()=>{const e={key:a,name:`Edward King ${a}`,age:"32",address:`London, Park Lane no. ${a}`};s([...r,e]),l(a+1)},d=e=>{const t=[...r],o=t.findIndex(f=>e.key===f.key),p=t[o];t.splice(o,1,{...p,...e}),s(t)},g={body:{row:F,cell:P}},m=x.map(e=>e.editable?{...e,onCell:t=>({record:t,editable:e.editable,dataIndex:e.dataIndex,title:e.title,handleSave:d})}:e);return y("div",{children:[n(k,{onClick:u,type:"primary",style:{marginBottom:16},children:"Add a row"}),n(v,{components:g,rowClassName:()=>"editable-row",bordered:!0,dataSource:r,columns:m})]})};export{K as default};
